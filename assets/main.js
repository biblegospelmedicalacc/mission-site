async function fetchJSON(path){try{const r=await fetch(path);if(!r.ok) return [];return await r.json();}catch(e){console.error(e);return []}}

async function renderNews(containerId){const data=await fetchJSON('content/news.json');const c=document.getElementById(containerId);if(!c) return; c.innerHTML=''; if(data.length===0){c.innerHTML='<p>No news yet.</p>'; return;} data.slice().reverse().forEach(item=>{const d=document.createElement('div');d.className='card';d.innerHTML=`<h3>${item.title}</h3><p>${item.text}</p>`+(item.media?`<p><a href="${item.media}" target="_blank">Media</a></p>`:'');c.appendChild(d);});}
async function renderGallery(containerId){const data=await fetchJSON('content/gallery.json');const c=document.getElementById(containerId);if(!c) return;c.innerHTML=''; if(data.length===0){c.innerHTML='<p>No gallery items yet.</p>'; return;} data.slice().reverse().forEach(item=>{const d=document.createElement('div');d.className='card';let mediaHtml=''; if(item.media && (item.media.includes('youtube.com')||item.media.includes('youtu.be'))){mediaHtml=`<p><a href="${item.media}" target="_blank">Watch video</a></p>`;}else if(item.media){mediaHtml=`<p><a href="${item.media}" target="_blank">View image</a></p>`;} d.innerHTML=`${mediaHtml}<p>${item.caption||''}</p>`;c.appendChild(d);});}
async function renderResources(containerId){const data=await fetchJSON('content/resources.json');const c=document.getElementById(containerId);if(!c) return;c.innerHTML=''; if(data.length===0){c.innerHTML='<p>No resources yet.</p>'; return;} data.slice().reverse().forEach(item=>{const d=document.createElement('div');d.className='card';d.innerHTML=`<h3><a href="${item.link}" target="_blank">${item.title}</a></h3>`;c.appendChild(d);});}

document.addEventListener('DOMContentLoaded',()=>{renderNews('news-preview');renderNews('news-container');renderGallery('gallery-container');renderResources('resources-container');});
